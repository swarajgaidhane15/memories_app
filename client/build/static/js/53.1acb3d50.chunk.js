"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[53],{1408:function(e,n,t){t.r(n),t.d(n,{default:function(){return Me}});var r=t(3712),a=t(7689),i=t(6731),o=t(885),s=t(2791),c=t(9434),l=t(8167),u=t(8302),d=t(7690),p=t(272),m=t(6513),h=t(456),f=t(8596),x=t(5569),g=(0,f.Z)((function(e){return{appBar:{borderRadius:15,margin:"30px 0",display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center",padding:"10px 50px"},heading:{color:"rgba(0,183,255, 1)",textDecoration:"none"},image:{marginLeft:"15px"},toolbar:{display:"flex",justifyContent:"flex-end",width:"400px"},profile:{display:"flex",justifyContent:"center",width:"400px"},userName:{display:"flex",alignItems:"center",marginRight:"2rem"},brandContainer:{display:"flex",alignItems:"center"},purple:{marginRight:"0.5rem",color:e.palette.getContrastText(x.Z[500]),backgroundColor:x.Z[500]}}})),v=t(4165),Z=t(5861),j=t(1044),y="/posts",b="/auth";j.ZP.interceptors.request.use((function(e){if(localStorage.getItem("profile")){var n=JSON.parse(localStorage.getItem("profile")).token;e.headers.Authorization="Bearer ".concat(n)}return e}));var S=function(e){return j.ZP.get("".concat(y,"?page=").concat(e))},k=function(e){return j.ZP.get("".concat(y,"/").concat(e))},C=function(e){return j.ZP.get("".concat(y,"/search?searchQuery=").concat(e.search||"none","&tags=").concat(e.tags))},w=function(e){return j.ZP.post(y,e)},N=function(e,n){return j.ZP.patch("".concat(y,"/").concat(e),n)},I=function(e){return j.ZP.delete("".concat(y,"/").concat(e))},T=function(e){return j.ZP.patch("".concat(y,"/").concat(e,"/likepost"))},E=t(1126),_={UNKNOWN_ERROR:"Some error occured. Please try later !",FAILED_GOOGLE_AUTH:"Couldn't authenticate with Google !",USER_ALREADY_EXIST:"User already exists !",INVALID_CREDENTIALS:"Invalid credentials !",USER_DOESNT_EXIST:"User doesn't exist !",PASSWORD_DOESNT_MATCH:"Password does not match",GET_POSTS:"Some error occured while fetching memories. Please refresh !",GET_POST:"Some error occured while fetching memory. Please refresh !",CREATE_POST:"Couldn't create a memory. Try again !",UPDATE_POST:"Couldn't update the memory. Try again !",DELETE_POST:"Couldn't delete the memory. Try again !",LIKE_POST:"Couldn't like the memory. Try again !"},P=t(636),O=function(e){return function(){var n=(0,Z.Z)((0,v.Z)().mark((function n(t){return(0,v.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:t((0,P.iT)(_[e]));case 1:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},R=function(){return function(){var e=(0,Z.Z)((0,v.Z)().mark((function e(n){return(0,v.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n((0,P.eO)());case 1:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()},A=function(e){return function(n){try{n((0,E.So)(e))}catch(t){n(O("UNKNOWN_ERROR"))}}},D=t.p+"static/media/memories.f32f4ea5411f1ce7b5ec.png",W=t(184),L=function(){var e=g(),n=(0,c.I0)(),t=(0,a.s0)(),r=(0,a.TH)(),f=(0,s.useState)(JSON.parse(localStorage.getItem("profile"))),x=(0,o.Z)(f,2),v=x[0],Z=x[1];(0,s.useEffect)((function(){var e=null===v||void 0===v?void 0:v.token;e&&(1e3*(0,h.Z)(e).exp<(new Date).getTime()&&j());Z(JSON.parse(localStorage.getItem("profile")))}),[r]);var j=function(){n((function(e){try{localStorage.removeItem("profile"),e((0,E.TX)())}catch(n){e(O("UNKNOWN_ERROR"))}})),Z(null),t("/auth")};return(0,W.jsxs)(l.Z,{className:e.appBar,position:"static",color:"inherit",children:[(0,W.jsxs)("div",{className:e.brandContainer,children:[(0,W.jsx)(u.Z,{component:i.rU,to:"/",className:e.heading,variant:"h2",align:"center",children:"Memories"}),(0,W.jsx)("img",{className:e.image,src:D,alt:"icon",height:"60"})]}),(0,W.jsx)(d.Z,{className:e.toolbar,children:null!==v&&void 0!==v&&v.result?(0,W.jsxs)("div",{className:e.profile,children:[(0,W.jsx)(p.Z,{className:e.purple,alt:null===v||void 0===v?void 0:v.result.name,src:null===v||void 0===v?void 0:v.result.imageUrl,children:null===v||void 0===v?void 0:v.result.name.charAt(0)}),(0,W.jsx)(u.Z,{className:e.userName,variant:"h6",children:null===v||void 0===v?void 0:v.result.name}),(0,W.jsx)(m.Z,{variant:"contained",className:e.logout,color:"secondary",onClick:j,children:"Logout"})]}):(0,W.jsx)(m.Z,{component:i.rU,to:"/auth",variant:"contained",color:"primary",children:"Sign In"})})]})},F=t(2982),B=t(5819),U=t(1288),z=t(2787),G=t(9526),M=t(9209),H=t(1413),K=t(9403),J=t.n(K),q=t(1473),V=function(e){return function(){var n=(0,Z.Z)((0,v.Z)().mark((function n(t){var r,a;return(0,v.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,S(e);case 3:r=n.sent,a=r.data,t((0,q.T6)(a)),n.next=11;break;case 8:n.prev=8,n.t0=n.catch(0),t(O("GET_POSTS"));case 11:case"end":return n.stop()}}),n,null,[[0,8]])})));return function(e){return n.apply(this,arguments)}}()},X=function(e){return function(){var n=(0,Z.Z)((0,v.Z)().mark((function n(t){var r,a;return(0,v.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,C(e);case 3:r=n.sent,a=r.data,t((0,q.X)(a)),n.next=12;break;case 8:n.prev=8,n.t0=n.catch(0),console.log(n.t0.message),t(O("GET_POSTS"));case 12:case"end":return n.stop()}}),n,null,[[0,8]])})));return function(e){return n.apply(this,arguments)}}()},Q=function(e){return function(){var n=(0,Z.Z)((0,v.Z)().mark((function n(t){var r,a;return(0,v.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,w(e);case 3:r=n.sent,a=r.data,t((0,q.ed)(a)),n.next=11;break;case 8:n.prev=8,n.t0=n.catch(0),t(O("CREATE_POST"));case 11:case"end":return n.stop()}}),n,null,[[0,8]])})));return function(e){return n.apply(this,arguments)}}()},Y=function(e,n){return function(){var t=(0,Z.Z)((0,v.Z)().mark((function t(r){var a,i;return(0,v.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,N(e,n);case 3:a=t.sent,i=a.data,r((0,q.hK)(i)),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),r(O("UPDATE_POST"));case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e){return t.apply(this,arguments)}}()},$=(0,f.Z)((function(e){return{root:{"& .MuiTextField-root":{margin:e.spacing(1)}},paper:{padding:e.spacing(2)},form:{display:"flex",flexWrap:"wrap",justifyContent:"center"},fileInput:{width:"97%",margin:"10px 0"},buttonSubmit:{marginBottom:10}}})),ee=function(e){var n,t=e.titleInputRef,r=e.currentId,a=e.setCurrentId,l=$(),d=null===(n=JSON.parse(localStorage.getItem("profile")))||void 0===n?void 0:n.result,p=(0,c.I0)(),h=(0,s.useState)({title:"",message:"",tags:"",selectedFile:""}),f=(0,o.Z)(h,2),x=f[0],g=f[1],j=(0,c.v9)((function(e){return r?e.posts.posts.find((function(e){return e._id===r})):null}));(0,s.useEffect)((function(){j&&g(j)}),[j]);var y=function(){var e=(0,Z.Z)((0,v.Z)().mark((function e(n){return(0,v.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.preventDefault(),p(null!=r?Y(r,x):Q((0,H.Z)((0,H.Z)({},x),{},{name:null===d||void 0===d?void 0:d.name}))),b();case 3:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),b=function(){a(null),g({title:"",message:"",tags:"",selectedFile:""})};return null!==d&&void 0!==d&&d.name?(0,W.jsx)(G.Z,{className:l.paper,children:(0,W.jsxs)("form",{autoComplete:"off",noValidate:!0,className:"".concat(l.root," ").concat(l.form),onSubmit:y,children:[(0,W.jsx)(u.Z,{variant:"h6",children:r?'Editing "'.concat(j.title,'"'):"Creating a Memory"}),(0,W.jsx)(z.Z,{name:"title",variant:"outlined",label:"Title",inputRef:t,fullWidth:!0,value:x.title,onChange:function(e){return g((0,H.Z)((0,H.Z)({},x),{},{title:e.target.value}))}}),(0,W.jsx)(z.Z,{name:"message",variant:"outlined",label:"Message",fullWidth:!0,multiline:!0,minRows:4,value:x.message,onChange:function(e){return g((0,H.Z)((0,H.Z)({},x),{},{message:e.target.value}))}}),(0,W.jsx)(z.Z,{name:"tags",variant:"outlined",label:"Tags (comma separated)",fullWidth:!0,value:x.tags,onChange:function(e){return g((0,H.Z)((0,H.Z)({},x),{},{tags:e.target.value.split(",")}))}}),(0,W.jsx)("div",{className:l.fileInput,children:(0,W.jsx)(J(),{type:"file",multiple:!1,onDone:function(e){var n=e.base64;return g((0,H.Z)((0,H.Z)({},x),{},{selectedFile:n}))}})}),(0,W.jsx)(m.Z,{className:l.buttonSubmit,variant:"contained",color:"primary",size:"large",type:"submit",fullWidth:!0,disabled:function(){var e=x.title,n=x.message;return!(e&&n)}(),children:"Submit"}),(0,W.jsx)(m.Z,{variant:"contained",color:"secondary",size:"small",onClick:b,fullWidth:!0,children:"Clear"})]})}):(0,W.jsx)(G.Z,{className:l.paper,elevation:6,children:(0,W.jsxs)(u.Z,{variant:"h6",align:"center",children:["Please signin to create a memory or like other's memory",(0,W.jsx)("br",{}),(0,W.jsx)(i.rU,{to:"/auth",children:(0,W.jsx)(m.Z,{variant:"contained",color:"secondary",size:"small",children:"Sign In here"})})]})})},ne=t(283),te=t(6706),re=t(6685),ae=t(6252),ie=t(4697),oe=t(6285),se=t(4212),ce=t(7407),le=t(367),ue=t(2426),de=t.n(ue),pe=(0,f.Z)({media:{height:0,paddingTop:"56.25%",backgroundColor:"rgba(0, 0, 0, 0.5)",backgroundBlendMode:"darken"},border:{border:"solid"},fullHeightCard:{height:"100%"},card:{display:"flex",flexDirection:"column",justifyContent:"space-between",borderRadius:"15px",height:"100%",position:"relative"},overlay:{position:"absolute",top:"20px",left:"20px",color:"white"},overlay2:{position:"absolute",top:"20px",right:"20px",color:"white"},grid:{display:"flex"},details:{display:"flex",justifyContent:"space-between",margin:"20px"},title:{padding:"0 16px"},cardActions:{padding:"0 16px 8px 16px",display:"flex",justifyContent:"space-between"},cardAction:{display:"block",textAlign:"initial"}}),me=function(e){var n,t=e.post,r=e.setCurrentId,i=pe(),o=(0,c.I0)(),s=(0,a.s0)(),l=JSON.parse(localStorage.getItem("profile")),d=(null===l||void 0===l?void 0:l.result.googleId)===(null===t||void 0===t?void 0:t.creator)||(null===l||void 0===l?void 0:l.result._id)===(null===t||void 0===t?void 0:t.creator),p=function(){return t.likes.length>0?t.likes.find((function(e){var n,t;return e===((null===l||void 0===l||null===(n=l.result)||void 0===n?void 0:n.googleId)||(null===l||void 0===l||null===(t=l.result)||void 0===t?void 0:t._id))}))?(0,W.jsxs)(W.Fragment,{children:[(0,W.jsx)(oe.Z,{fontSize:"small"}),"\xa0",t.likes.length>2?"You and ".concat(t.likes.length-1," others"):"".concat(t.likes.length," like").concat(t.likes.length>1?"s":"")]}):(0,W.jsxs)(W.Fragment,{children:[(0,W.jsx)(se.Z,{fontSize:"small"}),"\xa0",t.likes.length," ",1===t.likes.length?"Like":"Likes"]}):(0,W.jsxs)(W.Fragment,{children:[(0,W.jsx)(se.Z,{fontSize:"small"}),"\xa0Like"]})};return(0,W.jsxs)(ne.Z,{className:i.card,elevation:6,children:[(0,W.jsxs)(te.Z,{component:"span",name:"test",className:i.cardAction,onClick:function(){s("/posts/".concat(t._id))},children:[(0,W.jsx)(re.Z,{className:i.media,image:t.selectedFile||"https://user-images.githubusercontent.com/194400/49531010-48dad180-f8b1-11e8-8d89-1e61320e1d82.png",title:t.title}),(0,W.jsxs)("div",{className:i.overlay,children:[(0,W.jsx)(u.Z,{variant:"h6",children:t.name}),(0,W.jsx)(u.Z,{variant:"body2",children:de()(t.createdAt).fromNow()})]}),d&&(0,W.jsx)("div",{className:i.overlay2,children:(0,W.jsx)(m.Z,{style:{color:"white"},size:"small",onClick:function(){return r(t._id)},children:(0,W.jsx)(le.Z,{fontSize:"medium"})})}),(null===t||void 0===t||null===(n=t.tags)||void 0===n?void 0:n.length)&&(0,W.jsx)("div",{className:i.details,children:(0,W.jsx)(u.Z,{variant:"body2",color:"textSecondary",component:"h2",children:t.tags.map((function(e){return e&&"#".concat(e," ")}))})}),(0,W.jsx)(u.Z,{className:i.title,gutterBottom:!0,variant:"h5",component:"h2",children:t.title}),(0,W.jsx)(ae.Z,{children:(0,W.jsx)(u.Z,{variant:"body2",color:"textSecondary",component:"p",children:t.message})})]}),(0,W.jsxs)(ie.Z,{className:i.cardActions,children:[(0,W.jsx)(m.Z,{size:"small",color:"primary",onClick:function(){return o((e=t._id,function(){var n=(0,Z.Z)((0,v.Z)().mark((function n(t){var r,a;return(0,v.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,T(e);case 3:r=n.sent,a=r.data,t((0,q.hK)(a)),n.next=11;break;case 8:n.prev=8,n.t0=n.catch(0),t(O("LIKE_POST"));case 11:case"end":return n.stop()}}),n,null,[[0,8]])})));return function(e){return n.apply(this,arguments)}}()));var e},disabled:!(null!==l&&void 0!==l&&l.result),children:(0,W.jsx)(p,{})}),d&&(0,W.jsxs)(m.Z,{size:"small",color:"primary",onClick:function(){return o((e=t._id,function(){var n=(0,Z.Z)((0,v.Z)().mark((function n(t){return(0,v.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,I(e);case 3:t((0,q.bl)(e)),n.next=9;break;case 6:n.prev=6,n.t0=n.catch(0),t(O("DELETE_POST"));case 9:case"end":return n.stop()}}),n,null,[[0,6]])})));return function(e){return n.apply(this,arguments)}}()));var e},children:[(0,W.jsx)(ce.Z,{fontSize:"small"})," Delete"]})]})]})},he=t(7289),fe=(0,f.Z)((function(e){return{mainContainer:{display:"flex",alignItems:"center",flexWrap:"wrap"},smMargin:{margin:e.spacing(1)},actionDiv:{textAlign:"center"},no_post:{backgroundColor:"white",marginTop:"2rem",textAlign:"center",fontWeight:"600",borderRadius:"0.4rem",padding:"0.5rem",paddingBottom:"1rem"}}})),xe=function(e){var n,t=e.titleInputRef,r=e.setCurrentId,a=fe(),i=null===(n=JSON.parse(localStorage.getItem("profile")))||void 0===n?void 0:n.result,l=(0,c.v9)((function(e){return e.posts})).posts,d=(0,s.useState)(!1),p=(0,o.Z)(d,2),h=p[0],f=p[1];return(0,s.useEffect)((function(){setTimeout((function(){0===l.length&&f(!0)}),5e3)}),[l]),null!==l&&void 0!==l&&l.length?(0,W.jsx)(U.Z,{className:a.container,container:!0,alignItems:"stretch",spacing:3,children:l.map((function(e){return(0,W.jsx)(U.Z,{item:!0,xs:12,sm:12,md:6,lg:3,children:(0,W.jsx)(me,{post:e,setCurrentId:r})},e._id)}))}):h?(0,W.jsxs)(u.Z,{variant:"h6",className:a.no_post,children:["Looks like there are no memories \u2639\ufe0f",(0,W.jsx)("br",{}),(0,W.jsx)(m.Z,{variant:"contained",color:"secondary",size:"small",onClick:function(){return t.current.focus()},disabled:!i,children:"Create One \ud83d\ude09"})]}):(0,W.jsx)("div",{className:a.mainContainer,children:(0,F.Z)(Array(4)).map((function(e,n){return(0,W.jsx)(he.Z,{},n)}))})},ge=t(2536),ve=t(7915),Ze=(0,f.Z)((function(){return{ul:{justifyContent:"space-around"}}})),je=function(e){var n=e.page,t=(0,c.v9)((function(e){return e.posts})).numberOfPages,r=(0,c.I0)(),a=Ze();return(0,s.useEffect)((function(){n&&r(V(n))}),[r,n]),(0,W.jsx)(ge.Z,{classes:{ul:a.ul},count:t,page:Number(n)||1,variant:"outlined",color:"primary",renderItem:function(e){return(0,W.jsx)(ve.Z,(0,H.Z)((0,H.Z)({},e),{},{component:i.rU,to:"/posts?page=".concat(e.page)}))}})},ye=t(4942),be=(0,f.Z)((function(e){return{appBarSearch:{borderRadius:4,marginBottom:"1rem",display:"flex",padding:"16px"},pagination:{borderRadius:4,marginTop:"1rem",padding:"16px"},gridContainer:(0,ye.Z)({},e.breakpoints.down("xs"),{flexDirection:"column-reverse"})}})),Se=function(){var e=(0,c.I0)(),n=(0,a.s0)(),t=(0,i.lr)(),u=(0,o.Z)(t,2),d=u[0],p=(u[1],d.get("page")||1),h=d.get("searchQuery"),f=d.get("tags"),x=be(),g=(0,s.useState)(null),v=(0,o.Z)(g,2),Z=v[0],j=v[1],y=(0,s.useState)(h&&"none"!==h?h:""),b=(0,o.Z)(y,2),S=b[0],k=b[1],C=(0,s.useState)(f?f.split(","):[]),w=(0,o.Z)(C,2),N=w[0],I=w[1],T=(0,s.useRef)(null),E=function(){S.trim().length>0||N.length>0?(e(X({search:S,tags:N.join(",")})),n("/posts/search?searchQuery=".concat(S||"none","&tags=").concat(N.join(",")))):(e(V()),n("/posts"))};return(0,W.jsx)(B.Z,{in:!0,children:(0,W.jsx)(r.Z,{maxWidth:"xl",children:(0,W.jsxs)(U.Z,{container:!0,justifyContent:"space-between",alignItems:"stretch",spacing:3,className:x.gridContainer,children:[(0,W.jsx)(U.Z,{item:!0,xs:12,sm:6,md:9,children:(0,W.jsx)(xe,{setCurrentId:j,titleInputRef:T})}),(0,W.jsxs)(U.Z,{item:!0,xs:12,sm:6,md:3,children:[(0,W.jsxs)(l.Z,{className:x.appBarSearch,position:"static",color:"inherit",children:[(0,W.jsx)(z.Z,{onKeyDown:function(e){13===e.keyCode&&E()},name:"search",variant:"outlined",label:"Search Memories",fullWidth:!0,value:S,onChange:function(e){return k(e.target.value)}}),(0,W.jsx)(M.ZP,{style:{margin:"10px 0"},value:N,onAdd:function(e){return n=e,I([].concat((0,F.Z)(N),[n]));var n},onDelete:function(e){return n=e,I(N.filter((function(e){return e!==n})));var n},label:"Search Tags",variant:"outlined"}),(0,W.jsx)(m.Z,{onClick:E,className:x.searchButton,variant:"contained",color:"primary",children:"Search"})]}),(0,W.jsx)(ee,{titleInputRef:T,currentId:Z,setCurrentId:j}),!h&&!N.length&&(0,W.jsx)(G.Z,{className:x.pagination,elevation:6,children:(0,W.jsx)(je,{page:p})})]})]})})})},ke=t(9798),Ce=t(929),we=t(2827),Ne=t(4279),Ie=t(7025),Te=t(1900),Ee=t(859),_e=function(e){var n=e.name,t=e.handleChange,r=e.label,a=e.half,i=e.autoFocus,o=e.type,s=e.handleShowPassword;return(0,W.jsx)(U.Z,{item:!0,xs:12,sm:a?6:12,children:(0,W.jsx)(z.Z,{name:n,onChange:t,variant:"outlined",required:!0,fullWidth:!0,label:r,autoFocus:i,type:o,InputProps:"password"===n?{endAdornment:(0,W.jsx)(Ne.Z,{position:"end",children:(0,W.jsx)(Ie.Z,{onClick:s,children:"password"===o?(0,W.jsx)(Te.Z,{}):(0,W.jsx)(Ee.Z,{})})})}:null})})},Pe=function(){return(0,W.jsx)("svg",{style:{width:"20px",height:"20px"},viewBox:"0 0 24 24",children:(0,W.jsx)("path",{fill:"currentColor",d:"M21.35,11.1H12.18V13.83H18.69C18.36,17.64 15.19,19.27 12.19,19.27C8.36,19.27 5,16.25 5,12C5,7.9 8.2,4.73 12.2,4.73C15.29,4.73 17.1,6.7 17.1,6.7L19,4.72C19,4.72 16.56,2 12.1,2C6.42,2 2.03,6.8 2.03,12C2.03,17.05 6.16,22 12.25,22C17.6,22 21.5,18.33 21.5,12.91C21.5,11.76 21.35,11.1 21.35,11.1V11.1Z"})})},Oe=(0,f.Z)((function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center",padding:e.spacing(2)},root:{"& .MuiTextField-root":{margin:e.spacing(1)}},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(3)},submit:{margin:e.spacing(3,0,2)},googleButton:{marginBottom:e.spacing(2)},error:{display:"flex",flexDirection:"row",alignItems:"center"}}})),Re={firstName:"",lastName:"",email:"",password:"",confirmPassword:""},Ae=function(){var e=(0,s.useState)(!1),n=(0,o.Z)(e,2),t=n[0],i=n[1],l=(0,s.useState)(!1),d=(0,o.Z)(l,2),h=d[0],f=d[1],x=(0,s.useState)(Re),g=(0,o.Z)(x,2),y=g[0],S=g[1],k=(0,c.I0)(),C=(0,a.s0)(),w=Oe();(0,s.useEffect)((function(){we.MN.load("client:auth2",(function(){we.MN.client.init({clientId:"684382116518-7ldeoeun521n5odegl70meeqkd195qnc.apps.googleusercontent.com",scope:"email"})}))}),[]);var N=function(e){return S((0,H.Z)((0,H.Z)({},y),{},(0,ye.Z)({},e.target.name,e.target.value)))},I=function(){var e=(0,Z.Z)((0,v.Z)().mark((function e(n){var t,r;return(0,v.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=null===n||void 0===n?void 0:n.profileObj,r=null===n||void 0===n?void 0:n.tokenId;try{k(A({result:t,token:r})),C("/")}catch(a){k(O("FAILED_GOOGLE_AUTH"))}case 3:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return(0,W.jsx)(r.Z,{component:"main",maxWidth:"xs",children:(0,W.jsxs)(G.Z,{className:w.paper,elevation:3,children:[(0,W.jsx)(p.Z,{className:w.avatar,children:(0,W.jsx)(ke.Z,{})}),(0,W.jsx)(u.Z,{component:"h1",variant:"h5",children:t?"Sign up":"Sign in"}),(0,W.jsxs)("form",{className:w.form,onSubmit:function(e){e.preventDefault(),k(t?function(e,n){return function(){var t=(0,Z.Z)((0,v.Z)().mark((function t(r){var a,i;return(0,v.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,o=e,j.ZP.post("".concat(b,"/signup"),o);case 3:a=t.sent,i=a.data,r((0,E.So)(i)),n("/"),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),r(O("UNKNOWN_ERROR"));case 12:case"end":return t.stop()}var o}),t,null,[[0,9]])})));return function(e){return t.apply(this,arguments)}}()}(y,C):function(e,n){return function(){var t=(0,Z.Z)((0,v.Z)().mark((function t(r){var a,i,o,s,c;return(0,v.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,l=e,j.ZP.post("".concat(b,"/signin"),l);case 3:a=t.sent,i=a.data,r((0,E.So)(i)),n("/"),t.next=13;break;case 9:t.prev=9,t.t0=t.catch(0),s=null===(o=t.t0.response)||void 0===o?void 0:o.data,c=s.message,r(O(c));case 13:case"end":return t.stop()}var l}),t,null,[[0,9]])})));return function(e){return t.apply(this,arguments)}}()}(y,C))},children:[(0,W.jsxs)(U.Z,{container:!0,spacing:2,children:[t&&(0,W.jsxs)(W.Fragment,{children:[(0,W.jsx)(_e,{name:"firstName",label:"First Name",handleChange:N,autoFocus:!0,half:!0}),(0,W.jsx)(_e,{name:"lastName",label:"Last Name",handleChange:N,half:!0})]}),(0,W.jsx)(_e,{name:"email",label:"Email Address",handleChange:N,type:"email"}),(0,W.jsx)(_e,{name:"password",label:"Password",handleChange:N,type:h?"text":"password",handleShowPassword:function(){return f(!h)}}),t&&(0,W.jsx)(_e,{name:"confirmPassword",label:"Repeat Password",handleChange:N,type:"password"})]}),(0,W.jsx)(m.Z,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:w.submit,children:t?"Sign Up":"Sign In"}),(0,W.jsx)(Ce.GoogleLogin,{clientId:"684382116518-7ldeoeun521n5odegl70meeqkd195qnc.apps.googleusercontent.com",render:function(e){return(0,W.jsx)(m.Z,{className:w.googleButton,color:"primary",fullWidth:!0,onClick:e.onClick,disabled:e.disabled,startIcon:(0,W.jsx)(Pe,{}),variant:"contained",children:"Google Sign In"})},onSuccess:I,onFailure:function(e){k(O("FAILED_GOOGLE_AUTH"))},cookiePolicy:"single_host_origin"}),(0,W.jsx)(U.Z,{container:!0,justifyContent:"flex-end",children:(0,W.jsx)(U.Z,{item:!0,children:(0,W.jsx)(m.Z,{onClick:function(){i(!t),f(!1)},children:t?"Already have an account? Sign in":"Don't have an account? Sign Up"})})})]})]})})},De=t(7447),We=(0,f.Z)((function(e){return{media:{borderRadius:"20px",objectFit:"cover",width:"100%",maxWidth:"60%",maxHeight:"500px",float:"right"},card:(0,ye.Z)({display:"flex",width:"100%"},e.breakpoints.down("sm"),{flexWrap:"wrap",flexDirection:"column"}),section:{borderRadius:"20px",margin:"10px",flex:1},imageSection:(0,ye.Z)({marginLeft:"20px"},e.breakpoints.down("sm"),{marginLeft:0}),recommendedPosts:(0,ye.Z)({display:"flex"},e.breakpoints.down("sm"),{flexDirection:"column"}),loadingPaper:{display:"flex",justifyContent:"center",alignItems:"center",padding:"20px",borderRadius:"15px",height:"39vh"},no_post:{backgroundColor:"white",marginTop:"2rem",textAlign:"center",fontWeight:"600",borderRadius:"0.4rem",padding:"0.5rem",paddingBottom:"1rem"}}})),Le=function(){var e,n=(0,a.UO)().id,t=(0,c.v9)((function(e){return e.posts})),r=t.post,l=t.posts,d=(0,c.I0)(),p=(0,a.s0)(),m=(0,s.useState)(!1),h=(0,o.Z)(m,2),f=h[0],x=h[1],g=We();(0,s.useEffect)((function(){d(function(e){return function(){var n=(0,Z.Z)((0,v.Z)().mark((function n(t){var r,a;return(0,v.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,k(e);case 3:r=n.sent,a=r.data,t((0,q.SD)(a)),n.next=11;break;case 8:n.prev=8,n.t0=n.catch(0),t(O("GET_POST"));case 11:case"end":return n.stop()}}),n,null,[[0,8]])})));return function(e){return n.apply(this,arguments)}}()}(n)),setTimeout((function(){r||x(!0)}),5e3)}),[n]),(0,s.useEffect)((function(){var e;r&&d(X({search:"none",tags:null===r||void 0===r||null===(e=r.tags)||void 0===e?void 0:e.join(",")}))}),[r]);if(!r)return f?(0,W.jsxs)(u.Z,{variant:"h6",className:g.no_post,children:["Looks like there are no memories \u2639\ufe0f",(0,W.jsx)("br",{}),(0,W.jsx)(i.rU,{to:"/posts"})]}):(0,W.jsx)(he.Z,{width:"30%"});var j=l.filter((function(e){return e._id!==r._id}));return(0,W.jsxs)(W.Fragment,{children:[(0,W.jsx)(G.Z,{style:{padding:"20px",borderRadius:"15px"},elevation:6,children:(0,W.jsxs)("div",{className:g.card,children:[(0,W.jsxs)("div",{className:g.section,children:[(0,W.jsx)(u.Z,{variant:"h3",component:"h2",children:r.title}),(0,W.jsx)(u.Z,{gutterBottom:!0,variant:"h6",color:"textSecondary",component:"h2",children:null===r||void 0===r||null===(e=r.tags)||void 0===e?void 0:e.map((function(e){return"#".concat(e," ")}))}),(0,W.jsx)(u.Z,{gutterBottom:!0,variant:"body1",component:"p",children:r.message}),(0,W.jsxs)(u.Z,{variant:"h6",children:["Created by: ",r.name]}),(0,W.jsx)(u.Z,{variant:"body1",children:de()(r.createdAt).fromNow()}),(0,W.jsx)(De.Z,{style:{margin:"20px 0"}})]}),(0,W.jsx)("div",{className:g.imageSection,children:(0,W.jsx)("img",{className:g.media,src:r.selectedFile||"https://user-images.githubusercontent.com/194400/49531010-48dad180-f8b1-11e8-8d89-1e61320e1d82.png",alt:r.title})})]})}),(0,W.jsx)(G.Z,{style:{padding:"20px",borderRadius:"15px",marginTop:"2rem"},elevation:6,children:!!j.length&&(0,W.jsxs)("div",{className:g.section,children:[(0,W.jsx)(u.Z,{gutterBottom:!0,variant:"h5",children:"You might also like:"}),(0,W.jsx)(De.Z,{}),(0,W.jsx)("div",{className:g.recommendedPosts,children:j.map((function(e){var n=e.title,t=e.name,r=e.message,a=e.likes,i=e.selectedFile,o=e._id;return(0,W.jsxs)("div",{style:{margin:"20px",cursor:"pointer"},onClick:function(){return function(e){return p("/posts/".concat(e))}(o)},children:[(0,W.jsx)(u.Z,{gutterBottom:!0,variant:"h6",children:n}),(0,W.jsx)(u.Z,{gutterBottom:!0,variant:"subtitle2",children:t}),(0,W.jsx)(u.Z,{gutterBottom:!0,variant:"subtitle2",children:r}),(0,W.jsxs)(u.Z,{gutterBottom:!0,variant:"subtitle1",children:["Likes: ",a.length]}),(0,W.jsx)("img",{src:i,alt:"Image",width:"200px"})]},o)}))})]})})]})},Fe=t(2126),Be=t(14),Ue=(0,f.Z)((function(){return{snackbar:{backgroundColor:"#fff",color:"#000"}}})),ze=function(){var e=(0,c.I0)(),n=(0,c.v9)((function(e){return e.error})).error,t=Ue(),r=function(t,r){e(R()),n&&setTimeout((function(){e(R())}),5e3)},a=(0,W.jsx)(Ie.Z,{size:"small","aria-label":"close",color:"inherit",onClick:r,children:(0,W.jsx)(Be.Z,{fontSize:"small"})});return(0,W.jsx)(Fe.Z,{ContentProps:{classes:{root:t.snackbar}},open:""!==n,autoHideDuration:5e3,anchorOrigin:{vertical:"bottom",horizontal:"left"},onClose:r,message:n,action:a})},Ge=function(e){var n=e.children;return JSON.parse(localStorage.getItem("profile"))?(0,W.jsx)(a.Fg,{to:"/posts",replace:!0}):n},Me=function(){return(0,W.jsx)(i.VK,{children:(0,W.jsxs)(r.Z,{maxWidth:"xl",children:[(0,W.jsx)(L,{}),(0,W.jsx)(ze,{}),(0,W.jsxs)(a.Z5,{children:[(0,W.jsx)(a.AW,{exact:!0,path:"/",element:(0,W.jsx)(a.Fg,{to:"/posts",replace:!0})}),(0,W.jsx)(a.AW,{exact:!0,path:"/posts",element:(0,W.jsx)(Se,{})}),(0,W.jsx)(a.AW,{exact:!0,path:"/posts/search",element:(0,W.jsx)(Se,{})}),(0,W.jsx)(a.AW,{exact:!0,path:"/posts/:id",element:(0,W.jsx)(Le,{})}),(0,W.jsx)(a.AW,{exact:!0,path:"/auth",element:(0,W.jsx)(Ge,{children:(0,W.jsx)(Ae,{})})})]})]})})}}}]);
//# sourceMappingURL=53.1acb3d50.chunk.js.map